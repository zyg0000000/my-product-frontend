# æ•°æ®å½•å…¥Tabä¼˜åŒ–æ–¹æ¡ˆ

## ä¸€ã€ç°çŠ¶åˆ†æ

### å½“å‰å®ç°
```
æ•°æ®å½•å…¥Tab
â”œâ”€â”€ éšè—çš„æ—¥æœŸé€‰æ‹©å™¨ (entry-date-picker)
â”œâ”€â”€ è§†é¢‘åˆ—è¡¨è¡¨æ ¼
â”‚   â”œâ”€â”€ è¾¾äººåç§°
â”‚   â”œâ”€â”€ ä»»åŠ¡ID
â”‚   â”œâ”€â”€ å‘å¸ƒæ—¶é—´
â”‚   â”œâ”€â”€ è§†é¢‘é“¾æ¥
â”‚   â”œâ”€â”€ å½“æ—¥æ€»æ›å…‰ (å¯è¾“å…¥)
â”‚   â””â”€â”€ çŠ¶æ€ (å¾…æŠ“å–>14d / è‡ªåŠ¨æŠ“å–ä¸­ / å·²å®Œæˆ / å¤±è´¥)
â””â”€â”€ æ“ä½œæŒ‰é’®
    â”œâ”€â”€ ä¸€é”®æŠ“å–(â‰¤14å¤©)
    â”œâ”€â”€ ä¸€é”®æŠ“å–(>14å¤©)
    â”œâ”€â”€ å¾…æ‰‹åŠ¨æ›´æ–°
    â”œâ”€â”€ å–æ¶ˆ
    â””â”€â”€ ä¿å­˜å½“æ—¥æ•°æ®
```

### å­˜åœ¨çš„é—®é¢˜
1. âŒ æ—¥æœŸé€‰æ‹©å™¨éšè—ï¼Œæ— æ³•åˆ‡æ¢æ—¥æœŸæŸ¥çœ‹/ç¼–è¾‘å…¶ä»–æ—¥æœŸçš„æ•°æ®
2. âŒ "å¾…æŠ“å–(>14d)"çŠ¶æ€è¡¨è¿°ä¸å¤Ÿæ¸…æ™°
3. âŒ ç›´æ¥æ‰¹é‡ä¿å­˜ï¼Œç¼ºä¹è¾“å…¥éªŒè¯å’Œå˜æ›´æç¤º
4. âŒ åªèƒ½å½•å…¥æ’­æ”¾é‡ï¼Œç¼ºå°‘æŠ•æµæ¶ˆè€—ã€æŠ•æµæµé‡ç­‰å­—æ®µ
5. âŒ è§†è§‰æ ·å¼è¾ƒä¸ºæœ´ç´ ï¼Œä¿¡æ¯å±‚æ¬¡ä¸å¤Ÿæ¸…æ™°

---

## äºŒã€ä¼˜åŒ–æ–¹æ¡ˆï¼ˆæ¨èï¼šæ¸è¿›å¼æ”¹è¿›ï¼‰

### 2.1 æ·»åŠ æ—¥æœŸé€‰æ‹©å™¨ â­â­â­â­â­

**è®¾è®¡æ–¹æ¡ˆï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… æ•°æ®å½•å…¥æ—¥æœŸ: [2024-01-15 â–¼]   [ä»Šå¤©] [æ˜¨å¤©]      â”‚
â”‚  ğŸ’¡ æç¤º: å…±12æ¡è§†é¢‘ï¼Œå·²å½•å…¥8æ¡ï¼Œå¾…å½•å…¥4æ¡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°è¦ç‚¹ï¼š**
- åœ¨è¡¨æ ¼ä¸Šæ–¹æ·»åŠ æ˜¾çœ¼çš„æ—¥æœŸé€‰æ‹©å™¨ï¼ˆç±»ä¼¼æ—¥æŠ¥Tabçš„è®¾è®¡ï¼‰
- å¿«æ·æŒ‰é’®ï¼š"ä»Šå¤©"ã€"æ˜¨å¤©"ã€"å‰å¤©"
- æ˜¾ç¤ºå½•å…¥ç»Ÿè®¡ï¼šå·²å½•å…¥æ•°é‡ / æ€»æ•°é‡
- æ—¥æœŸæ”¹å˜æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½æ•°æ®
- å¦‚æœé€‰æ‹©çš„æ—¥æœŸå·²æœ‰æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸­ï¼ˆæ”¯æŒä¿®æ”¹ï¼‰

**æ•°æ®è·å–é€»è¾‘ï¼š**
```javascript
// API: /videos-for-entry?projectId=xxx&date=2024-01-15
// è¿”å›: {
//   data: [
//     {
//       collaborationId,
//       talentName,
//       publishDate,
//       taskId,
//       videoId,
//       totalViews: 1234567, // å¦‚æœå½“æ—¥å·²å½•å…¥ï¼Œæ˜¾ç¤ºå†å²æ•°æ®
//       isPrevious: true // æ ‡è®°æ˜¯å¦ä¸ºå†å²æ•°æ®
//     }
//   ]
// }
```

---

### 2.2 ä¼˜åŒ–çŠ¶æ€æ˜¾ç¤º â­â­â­â­

**å½“å‰é—®é¢˜ï¼š**
"å¾…æŠ“å–(>14d)" è¡¨è¿°æ¨¡ç³Šï¼Œå®¹æ˜“æ··æ·†

**ä¼˜åŒ–æ–¹æ¡ˆA - è¯¦ç»†çŠ¶æ€æ–‡æ¡ˆï¼š**
| åŸçŠ¶æ€ | ä¼˜åŒ–å | è¯´æ˜ |
|--------|--------|------|
| å¾…æŠ“å–(>14d) | ğŸŸ¡ è¶…æœŸå¾…æŠ“å– | æ˜ç¡®è¡¨ç¤ºè¶…è¿‡14å¤© |
| æœªå¼€å§‹ | âšª æœªæŠ“å– | é»˜è®¤çŠ¶æ€ |
| æ’é˜Ÿä¸­ | ğŸŸ  æ’é˜Ÿä¸­ | ä»»åŠ¡pending |
| è‡ªåŠ¨æŠ“å–ä¸­ | ğŸ”µ æŠ“å–ä¸­... | ä»»åŠ¡processing |
| å·²å®Œæˆ | âœ… å·²è‡ªåŠ¨è·å– | ä»»åŠ¡completed |
| å¤±è´¥ | âŒ æŠ“å–å¤±è´¥ [é‡è¯•] | ä»»åŠ¡failed + é‡è¯•æŒ‰é’® |

**ä¼˜åŒ–æ–¹æ¡ˆB - åˆ†ç»„ + Tooltipï¼ˆæ¨èï¼‰ï¼š**
```html
<span class="status-badge status-overdue"
      title="è§†é¢‘å·²å‘å¸ƒ14å¤©ä»¥ä¸Šï¼Œéœ€ä½¿ç”¨'è¶…æœŸæŠ“å–'åŠŸèƒ½">
  ğŸŸ¡ è¶…æœŸ
</span>
```

**CSSæ ·å¼ï¼š**
```css
.status-badge {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}
.status-overdue {
  background: #FEF3C7; /* amber-100 */
  color: #92400E; /* amber-800 */
}
.status-pending { background: #DBEAFE; color: #1E40AF; }
.status-completed { background: #D1FAE5; color: #065F46; }
.status-failed { background: #FEE2E2; color: #991B1B; }
```

**å¯¹å…¶ä»–åŠŸèƒ½çš„å½±å“ï¼š**
- âœ… ä¸å½±å“è‡ªåŠ¨åŒ–é€»è¾‘ï¼ˆçŠ¶æ€åˆ¤æ–­åŸºäº `isOverdue` å’Œ `task.status`ï¼‰
- âœ… åªæ˜¯æ–‡æ¡ˆå’Œæ ·å¼çš„ä¼˜åŒ–
- âš ï¸ éœ€è¦æ›´æ–°å¼¹çª—æ ‡é¢˜ï¼š"å¾…æ‰‹åŠ¨æ›´æ–°æ—¥æŠ¥ï¼ˆ>14å¤©ï¼‰" â†’ "è¶…æœŸè§†é¢‘å¤„ç†"

---

### 2.3 æ”¹è¿›ä¿å­˜æœºåˆ¶ â­â­â­â­â­

**å½“å‰é—®é¢˜ï¼š**
- ç›´æ¥åœ¨è¾“å…¥æ¡†è¾“å…¥ï¼Œæ‰¹é‡ä¿å­˜
- æ²¡æœ‰è¾“å…¥éªŒè¯
- æ²¡æœ‰å˜æ›´æç¤º
- ä¿å­˜å¤±è´¥æ²¡æœ‰æ˜ç¡®åé¦ˆ

**ä¼˜åŒ–æ–¹æ¡ˆï¼šå®æ—¶éªŒè¯ + å˜æ›´æ ‡è®°**

#### 2.3.1 è¾“å…¥éªŒè¯
```javascript
// å®æ—¶éªŒè¯è§„åˆ™
const validateInput = (value) => {
  const num = parseInt(value);
  return {
    valid: !isNaN(num) && num >= 0 && num <= 999999999,
    error: isNaN(num) ? 'è¯·è¾“å…¥æ•°å­—' :
           num < 0 ? 'ä¸èƒ½ä¸ºè´Ÿæ•°' :
           num > 999999999 ? 'æ•°å€¼è¿‡å¤§' : null
  };
};
```

#### 2.3.2 å˜æ›´æ ‡è®°
```html
<!-- ä¿®æ”¹åçš„è¡Œæ·»åŠ æ ‡è®° -->
<tr class="modified-row">
  <td>...</td>
  <td>
    <input value="1234567" class="modified-input" />
    <span class="modified-badge">âœ å·²ä¿®æ”¹</span>
  </td>
</tr>
```

#### 2.3.3 ä¿å­˜å‰ç¡®è®¤
```javascript
// ä¿å­˜å‰ç»Ÿè®¡
const modifiedCount = allVideosForEntry.filter(v => v.isModified).length;
if (modifiedCount > 0) {
  Modal.showConfirm(
    `å³å°†ä¿å­˜ ${modifiedCount} æ¡è®°å½•ï¼Œç¡®è®¤æäº¤å—ï¼Ÿ`,
    'ç¡®è®¤ä¿å­˜',
    async (confirmed) => {
      if (confirmed) await saveDailyData();
    }
  );
}
```

#### 2.3.4 ä¿å­˜ååé¦ˆ
```javascript
// æˆåŠŸåæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
alert(`âœ… ä¿å­˜æˆåŠŸï¼\n- æ›´æ–°äº† ${savedCount} æ¡è®°å½•\n- æ—¥æœŸ: ${entryDate}`);

// å¹¶è‡ªåŠ¨åˆ‡æ¢åˆ°æ—¥æŠ¥TabæŸ¥çœ‹æ•ˆæœ
setTimeout(() => {
  reportDatePicker.value = entryDate;
  switchTab('daily-report');
}, 1500);
```

**æ–¹æ¡ˆå¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| A. å½“å‰æ‰¹é‡ä¿å­˜ | ç®€å•å¿«é€Ÿ | æ— éªŒè¯ã€æ˜“è¯¯æ“ä½œ | â­â­ |
| B. å®æ—¶éªŒè¯+æ‰¹é‡ä¿å­˜ | é¿å…é”™è¯¯ã€ä¿æŒæ•ˆç‡ | éœ€è¦é¢å¤–UI | â­â­â­â­â­ |
| C. é€è¡Œä¿å­˜ | å³æ—¶åé¦ˆ | é¢‘ç¹è¯·æ±‚ã€æ…¢ | â­â­â­ |
| D. è‡ªåŠ¨ä¿å­˜è‰ç¨¿ | é˜²æ•°æ®ä¸¢å¤± | å®ç°å¤æ‚ | â­â­â­â­ |

**æ¨èï¼šæ–¹æ¡ˆBï¼ˆå®æ—¶éªŒè¯+æ‰¹é‡ä¿å­˜ï¼‰**

---

### 2.4 æ‰©å±•å­—æ®µæ”¯æŒæŠ•æµæ•°æ® â­â­â­â­â­

**éœ€æ±‚åˆ†æï¼š**
éœ€è¦å½•å…¥æ¯æ—¥çš„ï¼š
1. è‡ªç„¶æ’­æ”¾é‡ï¼ˆå·²æœ‰ï¼‰
2. æŠ•æµæ¶ˆè€—é‡‘é¢
3. æŠ•æµå¸¦æ¥çš„æ’­æ”¾é‡

**æ•°æ®ç»“æ„è®¾è®¡ï¼š**

#### Option 1: åœ¨ daily-stats é›†åˆæ‰©å±•
```javascript
{
  projectId: "xxx",
  date: "2024-01-15",
  stats: [
    {
      collaborationId: "xxx",
      naturalViews: 1000000,      // è‡ªç„¶æ’­æ”¾é‡
      paidAmount: 5000,            // æŠ•æµæ¶ˆè€—ï¼ˆå…ƒï¼‰
      paidViews: 200000,           // æŠ•æµæ’­æ”¾é‡
      totalViews: 1200000,         // æ€»æ’­æ”¾é‡ï¼ˆè®¡ç®—å­—æ®µï¼‰
      updatedAt: "2024-01-15T10:30:00Z"
    }
  ]
}
```

#### Option 2: ç‹¬ç«‹é›†åˆ paid-promotion
```javascript
// paid-promotion é›†åˆ
{
  projectId: "xxx",
  collaborationId: "xxx",
  date: "2024-01-15",
  amount: 5000,           // æŠ•æµé‡‘é¢
  views: 200000,          // æŠ•æµå¸¦æ¥çš„æ’­æ”¾é‡
  source: "feishu",       // æ•°æ®æ¥æº: manual / feishu
  syncedAt: "2024-01-15T10:30:00Z"
}
```

**æ¨èï¼šOption 1ï¼ˆç»Ÿä¸€å­˜å‚¨ï¼‰**
- âœ… æŸ¥è¯¢ç®€å•ï¼ˆä¸€æ¬¡æŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®ï¼‰
- âœ… äº‹åŠ¡æ€§å¥½ï¼ˆä¸€èµ·ä¿å­˜ï¼‰
- âœ… ä¾¿äºè®¡ç®—æ€»æ’­æ”¾é‡
- âŒ å­—æ®µè¾ƒå¤š

**UIè®¾è®¡æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆAï¼šå±•å¼€è¡Œï¼ˆæ¨èï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼ ä¸‰  â”‚ 123456  â”‚ 2024-01-10 â”‚ [â–¶ å±•å¼€è¯¦æƒ…] â”‚ âœ… å·²å®Œæˆ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‚¹å‡»"å±•å¼€è¯¦æƒ…"åï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼ ä¸‰  â”‚ 123456  â”‚ 2024-01-10 â”‚ [â–¼ æ”¶èµ·è¯¦æƒ…] â”‚ âœ… å·²å®Œæˆ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š è‡ªç„¶æ’­æ”¾é‡   â”‚ [1,000,000 ..................] å·²è‡ªåŠ¨è·å–   â”‚
â”‚  ğŸ’° æŠ•æµæ¶ˆè€—     â”‚ [Â¥ 5,000 .....................] æ‰‹åŠ¨è¾“å…¥    â”‚
â”‚  ğŸ“ˆ æŠ•æµæ’­æ”¾é‡   â”‚ [200,000 .....................] æ‰‹åŠ¨è¾“å…¥    â”‚
â”‚  ğŸ“ æ€»æ’­æ”¾é‡     â”‚ 1,200,000 (è‡ªåŠ¨è®¡ç®—)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ–¹æ¡ˆBï¼šåˆ†Tab
```
[åŸºç¡€æ•°æ®] [æŠ•æµæ•°æ®]

åŸºç¡€æ•°æ®Tabï¼š
- è¾¾äººåç§°ã€æ’­æ”¾é‡ç­‰ï¼ˆå½“å‰å†…å®¹ï¼‰

æŠ•æµæ•°æ®Tabï¼š
- æŠ•æµæ¶ˆè€—ã€æŠ•æµæ’­æ”¾é‡ç­‰
```

#### æ–¹æ¡ˆCï¼šå¼¹çª—ç¼–è¾‘
```
ç‚¹å‡»"ç¼–è¾‘" â†’ å¼¹å‡ºè¯¦ç»†ç¼–è¾‘æ¡†
```

**æ¨èï¼šæ–¹æ¡ˆAï¼ˆå±•å¼€è¡Œï¼‰**
- âœ… ä¸€å±å†…å®Œæˆæ‰€æœ‰æ“ä½œ
- âœ… è§†è§‰å±‚æ¬¡æ¸…æ™°
- âœ… é€‚åˆæ•°æ®å½•å…¥åœºæ™¯
- âŒ è¡¨æ ¼é«˜åº¦ä¼šå˜åŒ–ï¼ˆå¯é€šè¿‡åŠ¨ç”»ä¼˜åŒ–ï¼‰

---

### 2.5 é£ä¹¦åŒæ­¥æ–¹æ¡ˆ â­â­â­â­

**èƒŒæ™¯ï¼š**
æŠ•æµæ•°æ®é€šå¸¸è®°å½•åœ¨é£ä¹¦è¡¨æ ¼ä¸­ï¼Œéœ€è¦æ”¯æŒæ‰¹é‡åŒæ­¥ã€‚

**æ–¹æ¡ˆè®¾è®¡ï¼š**

#### æ•°æ®æµç¨‹
```
é£ä¹¦è¡¨æ ¼ â†’ äº‘å‡½æ•°è·å– â†’ è§£æåŒ¹é… â†’ å†™å…¥æ•°æ®åº“ â†’ å‰ç«¯åˆ·æ–°
```

#### é£ä¹¦è¡¨æ ¼æ ¼å¼ï¼ˆç¤ºä¾‹ï¼‰
```
| æ—¥æœŸ       | è¾¾äººåç§° | ä»»åŠ¡ID  | æŠ•æµé‡‘é¢ | æŠ•æµæ’­æ”¾é‡ |
|-----------|---------|---------|----------|-----------|
| 2024-01-15| å¼ ä¸‰    | 123456  | 5000     | 200000    |
| 2024-01-15| æå››    | 123457  | 3000     | 150000    |
```

#### äº‘å‡½æ•°å®ç°
```javascript
// /sync-paid-promotion-from-feishu
export async function main(ctx) {
  const { projectId, date, feishuTableId } = ctx.body;

  // 1. è°ƒç”¨é£ä¹¦APIè·å–è¡¨æ ¼æ•°æ®
  const feishuData = await fetchFeishuTable(feishuTableId);

  // 2. è§£æå¹¶åŒ¹é…é¡¹ç›®çš„åˆä½œè¾¾äºº
  const collaborations = await db.collection('collaborations')
    .find({ projectId })
    .toArray();

  const matchedData = feishuData.map(row => {
    const collab = collaborations.find(c =>
      c.taskId === row.taskId || c.talentName === row.talentName
    );
    return {
      collaborationId: collab._id,
      date: row.date,
      paidAmount: row.amount,
      paidViews: row.views
    };
  });

  // 3. æ‰¹é‡æ›´æ–° daily-stats
  await updateDailyStats(projectId, date, matchedData);

  return { success: true, syncedCount: matchedData.length };
}
```

#### å‰ç«¯UI
```html
<button id="sync-feishu-btn" class="...">
  <svg>...</svg>
  é£ä¹¦æ•°æ®åŒæ­¥
</button>

<!-- å¼¹çª— -->
<div id="feishu-sync-modal">
  <h2>ä»é£ä¹¦åŒæ­¥æŠ•æµæ•°æ®</h2>
  <label>é£ä¹¦è¡¨æ ¼ID</label>
  <input id="feishu-table-id" placeholder="è¾“å…¥è¡¨æ ¼IDæˆ–é“¾æ¥" />
  <label>åŒæ­¥æ—¥æœŸ</label>
  <input type="date" id="sync-date" />
  <button>å¼€å§‹åŒæ­¥</button>
</div>
```

**å®ç°ä¼˜å…ˆçº§ï¼š**
1. â­â­â­â­â­ å…ˆå®ç°æ‰‹åŠ¨å½•å…¥æŠ•æµæ•°æ®
2. â­â­â­â­ å†å®ç°é£ä¹¦åŒæ­¥åŠŸèƒ½
3. â­â­â­ æœ€åä¼˜åŒ–è‡ªåŠ¨åŒæ­¥

---

### 2.6 è§†è§‰æ ·å¼ä¼˜åŒ– â­â­â­â­

#### ä¼˜åŒ–ç‚¹1: çŠ¶æ€é¢œè‰²ç¼–ç 
```css
/* ä¸åŒçŠ¶æ€ä¸åŒèƒŒæ™¯è‰² */
tr.status-completed { background: #F0FDF4; } /* green-50 */
tr.status-pending { background: #EFF6FF; }   /* blue-50 */
tr.status-overdue { background: #FEF3C7; }   /* amber-50 */
tr.status-failed { background: #FEE2E2; }     /* red-50 */
tr.modified { border-left: 4px solid #6366F1; } /* indigo-500 */
```

#### ä¼˜åŒ–ç‚¹2: è¾“å…¥æ¡†æ ·å¼å¢å¼º
```css
input.view-input {
  border: 2px solid #E5E7EB;
  transition: all 0.2s;
}
input.view-input:focus {
  border-color: #6366F1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}
input.view-input.modified {
  border-color: #10B981; /* green-500 */
  background: #F0FDF4;
}
input.view-input.error {
  border-color: #EF4444; /* red-500 */
  background: #FEE2E2;
}
```

#### ä¼˜åŒ–ç‚¹3: æ·»åŠ åŠ è½½éª¨æ¶å±
```html
<!-- åŠ è½½ä¸­æ˜¾ç¤ºéª¨æ¶å±è€Œä¸æ˜¯æ–‡å­— -->
<tr class="skeleton-row">
  <td><div class="skeleton-box w-20"></div></td>
  <td><div class="skeleton-box w-24"></div></td>
  <td><div class="skeleton-box w-32"></div></td>
  <td><div class="skeleton-box w-16"></div></td>
  <td><div class="skeleton-box w-full"></div></td>
  <td><div class="skeleton-box w-20"></div></td>
</tr>
```

#### ä¼˜åŒ–ç‚¹4: å“åº”å¼è®¾è®¡
```css
/* ç§»åŠ¨ç«¯éšè—éƒ¨åˆ†åˆ— */
@media (max-width: 768px) {
  th:nth-child(2), td:nth-child(2) { display: none; } /* ä»»åŠ¡ID */
  th:nth-child(4), td:nth-child(4) { display: none; } /* è§†é¢‘é“¾æ¥ */
}
```

#### ä¼˜åŒ–ç‚¹5: ç»Ÿè®¡å¡ç‰‡
```html
<div class="stats-cards">
  <div class="stat-card">
    <span class="stat-label">å·²å½•å…¥</span>
    <span class="stat-value text-green-600">8</span>
  </div>
  <div class="stat-card">
    <span class="stat-label">å¾…å½•å…¥</span>
    <span class="stat-value text-amber-600">4</span>
  </div>
  <div class="stat-card">
    <span class="stat-label">è¶…æœŸè§†é¢‘</span>
    <span class="stat-value text-red-600">2</span>
  </div>
</div>
```

---

## ä¸‰ã€å®æ–½å»ºè®®

### Phase 1: åŸºç¡€ä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰
- [x] 2.1 æ·»åŠ æ—¥æœŸé€‰æ‹©å™¨ + å½•å…¥ç»Ÿè®¡
- [x] 2.2 ä¼˜åŒ–çŠ¶æ€æ˜¾ç¤ºæ–‡æ¡ˆå’Œæ ·å¼
- [x] 2.3 æ·»åŠ è¾“å…¥éªŒè¯å’Œå˜æ›´æ ‡è®°
- [x] 2.6 åŸºç¡€è§†è§‰ä¼˜åŒ–

**ä¼˜å…ˆçº§ï¼šâ­â­â­â­â­ï¼ˆå¿…é¡»åšï¼‰**

### Phase 2: åŠŸèƒ½æ‰©å±•ï¼ˆ2-3å¤©ï¼‰
- [x] 2.4 æ‰©å±•æŠ•æµæ•°æ®å­—æ®µ
- [x] å®ç°å±•å¼€è¡ŒUI
- [x] ä¿®æ”¹ä¿å­˜APIæ”¯æŒæ–°å­—æ®µ
- [x] 2.5 é£ä¹¦åŒæ­¥ï¼ˆæ‰‹åŠ¨ç‰ˆï¼‰

**ä¼˜å…ˆçº§ï¼šâ­â­â­â­ï¼ˆé‡è¦ï¼‰**

### Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆ3-5å¤©ï¼‰
- [ ] è‡ªåŠ¨ä¿å­˜è‰ç¨¿
- [ ] é£ä¹¦è‡ªåŠ¨åŒæ­¥
- [ ] æ‰¹é‡å¯¼å…¥/å¯¼å‡º
- [ ] æ•°æ®æ ¡éªŒè§„åˆ™å¼•æ“

**ä¼˜å…ˆçº§ï¼šâ­â­â­ï¼ˆå¯é€‰ï¼‰**

---

## å››ã€æŠ€æœ¯è¦ç‚¹

### 4.1 APIè°ƒæ•´

#### ä¿®æ”¹ /daily-stats POSTæ¥å£
```javascript
// è¯·æ±‚ä½“
{
  projectId: "xxx",
  date: "2024-01-15",
  data: [
    {
      collaborationId: "xxx",
      naturalViews: 1000000,
      paidAmount: 5000,      // æ–°å¢
      paidViews: 200000      // æ–°å¢
    }
  ]
}
```

#### æ–°å¢ /sync-feishu-data æ¥å£
```javascript
{
  projectId: "xxx",
  feishuTableId: "xxx",
  dateRange: ["2024-01-01", "2024-01-15"]
}
```

### 4.2 å‰ç«¯çŠ¶æ€ç®¡ç†
```javascript
// å¢å¼ºallVideosForEntryçš„æ•°æ®ç»“æ„
allVideosForEntry = [
  {
    collaborationId: "xxx",
    talentName: "å¼ ä¸‰",
    // ... åŸæœ‰å­—æ®µ

    // æ–°å¢å­—æ®µ
    naturalViews: 1000000,    // è‡ªç„¶æ’­æ”¾é‡
    paidAmount: 5000,          // æŠ•æµé‡‘é¢
    paidViews: 200000,         // æŠ•æµæ’­æ”¾é‡
    totalViews: 1200000,       // æ€»è®¡ï¼ˆè®¡ç®—ï¼‰

    // UIçŠ¶æ€
    isExpanded: false,         // æ˜¯å¦å±•å¼€è¯¦æƒ…
    isModified: false,         // æ˜¯å¦è¢«ä¿®æ”¹
    isPrevious: false,         // æ˜¯å¦ä¸ºå†å²æ•°æ®
    validationError: null      // éªŒè¯é”™è¯¯ä¿¡æ¯
  }
];
```

---

## äº”ã€æ•ˆæœé¢„æœŸ

### æ”¹è¿›å‰
- âŒ æ— æ³•é€‰æ‹©æ—¥æœŸ
- âŒ çŠ¶æ€è¡¨è¿°æ¨¡ç³Š
- âŒ æ— è¾“å…¥éªŒè¯
- âŒ åªèƒ½å½•å…¥æ’­æ”¾é‡
- âŒ è§†è§‰è¾ƒæœ´ç´ 

### æ”¹è¿›å
- âœ… çµæ´»çš„æ—¥æœŸé€‰æ‹©
- âœ… æ¸…æ™°çš„çŠ¶æ€å±•ç¤º
- âœ… å®æ—¶è¾“å…¥éªŒè¯
- âœ… æ”¯æŒæŠ•æµæ•°æ®å½•å…¥
- âœ… ç°ä»£åŒ–çš„è§†è§‰è®¾è®¡
- âœ… æ”¯æŒé£ä¹¦æ‰¹é‡åŒæ­¥

### ç”¨æˆ·ä½“éªŒæå‡
| æŒ‡æ ‡ | æ”¹è¿›å‰ | æ”¹è¿›å | æå‡ |
|------|--------|--------|------|
| å½•å…¥æ•ˆç‡ | â­â­â­ | â­â­â­â­â­ | +67% |
| é”™è¯¯ç‡ | â­â­ | â­â­â­â­ | +100% |
| åŠŸèƒ½å®Œæ•´æ€§ | â­â­ | â­â­â­â­â­ | +150% |
| è§†è§‰ç¾è§‚åº¦ | â­â­â­ | â­â­â­â­â­ | +67% |

---

## å…­ã€é£é™©è¯„ä¼°

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| APIå˜æ›´å½±å“ç°æœ‰åŠŸèƒ½ | é«˜ | ä½ | ä¿æŒå‘åå…¼å®¹ï¼Œæ–°å¢å­—æ®µå¯é€‰ |
| é£ä¹¦APIé™æµ | ä¸­ | ä¸­ | å®ç°é™æµå’Œé‡è¯•æœºåˆ¶ |
| æ•°æ®é‡å¤§å¯¼è‡´æ€§èƒ½é—®é¢˜ | ä¸­ | ä½ | åˆ†é¡µåŠ è½½ï¼Œè™šæ‹Ÿæ»šåŠ¨ |
| ç”¨æˆ·ä¸ä¹ æƒ¯æ–°UI | ä½ | ä¸­ | ä¿ç•™æ—§ç‰ˆåˆ‡æ¢é€‰é¡¹ |

---

## ä¸ƒã€æ€»ç»“

**æ¨èå®æ–½é¡ºåºï¼š**
1. â­â­â­â­â­ æ—¥æœŸé€‰æ‹©å™¨ + çŠ¶æ€ä¼˜åŒ– + è¾“å…¥éªŒè¯ï¼ˆPhase 1ï¼‰
2. â­â­â­â­â­ æŠ•æµæ•°æ®å­—æ®µæ‰©å±•ï¼ˆPhase 2ï¼‰
3. â­â­â­â­ é£ä¹¦æ‰‹åŠ¨åŒæ­¥ï¼ˆPhase 2ï¼‰
4. â­â­â­ é£ä¹¦è‡ªåŠ¨åŒæ­¥ï¼ˆPhase 3ï¼‰

**é¢„è®¡å·¥ä½œé‡ï¼š**
- Phase 1: 1-2å¤©ï¼ˆå‰ç«¯ä¸ºä¸»ï¼‰
- Phase 2: 2-3å¤©ï¼ˆå‰åç«¯åä½œï¼‰
- Phase 3: 3-5å¤©ï¼ˆå¤æ‚åŠŸèƒ½ï¼‰

**ç«‹å³å¯å¼€å§‹ï¼š**
å»ºè®®å…ˆå®Œæˆ Phase 1ï¼ŒéªŒè¯ç”¨æˆ·åé¦ˆåå†è¿›è¡Œ Phase 2 å’Œ Phase 3ã€‚
