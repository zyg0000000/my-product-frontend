# AgentWorks 本地开发指南

## 🛠️ 环境准备（首次设置，只需做一次）

### 1. 安装 Node.js

**必需版本**：Node.js 20 或更高

**下载地址**：https://nodejs.org/

- Windows/Mac：下载安装包直接安装
- 验证安装：打开终端（命令提示符）运行：
  ```bash
  node -v
  # 应该显示 v20.x.x 或更高

  npm -v
  # 应该显示 10.x.x 或更高
  ```

### 2. 安装 Git

**下载地址**：https://git-scm.com/

- 验证安装：
  ```bash
  git --version
  ```

### 3. 配置 Git（如果还没配置）

```bash
git config --global user.name "你的名字"
git config --global user.email "你的邮箱"
```

---

## 📥 克隆代码到本地（首次设置）

### 方式一：使用命令行（推荐）

```bash
# 1. 选择一个目录存放代码，比如：
cd ~/Documents  # Mac/Linux
cd C:\Users\你的用户名\Documents  # Windows

# 2. 克隆仓库
git clone https://github.com/zyg0000000/my-product-frontend.git

# 3. 进入项目目录
cd my-product-frontend/frontends/agentworks

# 4. 安装依赖
npm install
```

### 方式二：使用 GitHub Desktop（图形界面）

1. 下载 GitHub Desktop：https://desktop.github.com/
2. 登录你的 GitHub 账号
3. 点击 "Clone a repository"
4. 选择 `zyg0000000/my-product-frontend`
5. 选择本地保存路径，点击 Clone

---

## 🔄 每次开发新功能的完整流程

### 步骤 1️⃣：拉取最新代码（每次开发前必做）

```bash
# 确保在项目根目录
cd ~/Documents/my-product-frontend  # 改成你的实际路径

# 拉取最新代码
git checkout main
git pull origin main

# 如果有 merge 到 main 的新代码，需要重新安装依赖
cd frontends/agentworks
npm install
```

### 步骤 2️⃣：创建新的开发分支（可选但推荐）

```bash
# 创建并切换到新分支
git checkout -b feature/你的功能名称
```

### 步骤 3️⃣：启动本地开发服务器

```bash
# 在 frontends/agentworks 目录下运行
npm run dev
```

**会看到类似的输出**：
```
  VITE v7.2.2  ready in 500 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
  ➜  press h + enter to show help
```

**打开浏览器访问**：http://localhost:5173/

**开发服务器特点**：
- ✅ 修改代码后自动刷新浏览器
- ✅ 实时看到效果
- ✅ 显示错误信息
- ⚠️ **不要关闭这个终端窗口**，保持服务器运行

### 步骤 4️⃣：开发代码

- 使用你喜欢的编辑器打开项目（推荐 VS Code）
- 修改 `src/` 目录下的文件
- 浏览器会自动刷新显示最新效果

### 步骤 5️⃣：代码完成后的检查

**打开新的终端窗口**（保持开发服务器运行），运行：

```bash
# 1. 格式化代码
npm run format

# 2. 检查代码质量
npm run lint

# 3. 如果有 lint 错误，可以尝试自动修复
npm run lint -- --fix

# 4. 构建测试（确保能正常构建）
npm run build
```

### 步骤 6️⃣：提交代码到 GitHub

```bash
# 1. 查看修改了哪些文件
git status

# 2. 添加所有修改
git add .

# 3. 提交（写清楚改了什么）
git commit -m "feat: 添加了xxx功能"

# 4. 推送到 GitHub
git push origin feature/你的功能名称
```

### 步骤 7️⃣：创建 Pull Request（合并到主分支）

1. 访问 GitHub 仓库页面
2. 会看到 "Compare & pull request" 按钮
3. 填写 PR 描述
4. 点击 "Create pull request"
5. 审核通过后点击 "Merge pull request"

---

## 🚀 Cloudflare Pages 自动部署

### 好消息：你不需要手动部署！

**自动部署流程**：
1. 你将代码 push 到 GitHub
2. Cloudflare Pages 自动检测到更新
3. 自动运行 `npm install && npm run build`
4. 自动部署到生产环境
5. 几分钟后网站就更新了

**查看部署状态**：
1. 登录 Cloudflare Dashboard
2. 进入 Pages 项目
3. 查看 "Deployments" 标签

**部署时间**：通常 2-5 分钟

---

## 📂 在哪里运行命令？

### 所有命令都在你的**本地电脑**上运行

**Windows**：
- 使用 "命令提示符" (cmd) 或 "PowerShell"
- 或者使用 Git Bash（安装 Git 时一起装的）
- 推荐：使用 VS Code 的集成终端

**Mac/Linux**：
- 使用 "终端" (Terminal)
- 推荐：使用 VS Code 的集成终端

**使用 VS Code 集成终端**（最推荐）：
1. 打开 VS Code
2. 打开项目文件夹：`File > Open Folder` 选择 `my-product-frontend`
3. 按 `` Ctrl + ` `` (反引号) 打开终端
4. 终端会自动在项目目录下

---

## 🔧 常用命令速查

| 命令 | 作用 | 何时使用 |
|------|------|----------|
| `npm install` | 安装依赖 | 首次克隆代码、pull 新代码后 |
| `npm run dev` | 启动开发服务器 | 每次开始开发前 |
| `npm run format` | 格式化代码 | 写完代码后 |
| `npm run lint` | 检查代码质量 | 提交代码前 |
| `npm run build` | 构建生产版本 | 提交前测试是否能构建 |
| `git pull` | 拉取最新代码 | 每次开发前 |
| `git status` | 查看文件状态 | 随时查看 |
| `git add .` | 添加所有修改 | 提交前 |
| `git commit -m "..."` | 提交代码 | 写完代码后 |
| `git push` | 推送到 GitHub | 提交后 |

---

## ❓ 常见问题

### Q1: npm install 很慢怎么办？

**方案**：使用国内镜像源
```bash
# 临时使用淘宝镜像
npm install --registry=https://registry.npmmirror.com

# 或者永久设置
npm config set registry https://registry.npmmirror.com
```

### Q2: npm run dev 后打不开页面？

**检查**：
- 确保终端没有报错
- 确保端口 5173 没被占用
- 尝试访问 http://127.0.0.1:5173/

### Q3: git push 失败提示权限问题？

**解决**：
1. 配置 GitHub 认证（SSH key 或 Personal Access Token）
2. 参考：https://docs.github.com/cn/authentication

### Q4: 修改了代码但浏览器没更新？

**解决**：
- 刷新浏览器（Ctrl+R 或 Cmd+R）
- 硬刷新（Ctrl+Shift+R 或 Cmd+Shift+R）
- 检查开发服务器是否还在运行

### Q5: 需要在服务器上运行这些命令吗？

**不需要！**
- 所有开发命令（`npm run dev`, `npm run format` 等）都在**本地电脑**运行
- 服务器部署由 Cloudflare Pages 自动完成
- 你只需要把代码 push 到 GitHub，其他的自动完成

---

## 🎯 推荐的 VS Code 插件

安装这些插件让开发更方便：

1. **ESLint** - 实时显示代码质量问题
2. **Prettier** - 保存时自动格式化代码
3. **GitLens** - 增强 Git 功能
4. **Auto Rename Tag** - 自动重命名 HTML/JSX 标签
5. **ES7+ React/Redux/React-Native snippets** - React 代码片段

**配置 VS Code 保存时自动格式化**：

1. 打开设置（File > Preferences > Settings）
2. 搜索 "format on save"
3. 勾选 "Editor: Format On Save"
4. 这样每次保存文件时就自动格式化了，不用手动运行 `npm run format`

---

## 📝 快速开始检查清单

- [ ] 安装了 Node.js 20+
- [ ] 安装了 Git
- [ ] 克隆了代码到本地
- [ ] 运行了 `npm install`
- [ ] 能成功运行 `npm run dev`
- [ ] 浏览器能打开 http://localhost:5173/
- [ ] 安装了 VS Code（推荐）
- [ ] 安装了推荐的 VS Code 插件

**全部勾选？恭喜你，可以开始开发了！** 🎉

---

## 💡 小贴士

1. **每天开始工作前**：先 `git pull` 拉取最新代码
2. **经常提交代码**：不要攒太多修改再提交
3. **写清楚 commit 信息**：方便以后查看历史
4. **遇到问题先看报错信息**：通常会提示问题所在
5. **本地测试通过再 push**：避免推送有问题的代码

---

有问题随时问我！
