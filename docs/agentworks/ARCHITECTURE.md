# AgentWorks é¡¹ç›®æ¶æ„æ–‡æ¡£

## ğŸ“‹ ç›®å½•
- [ç³»ç»Ÿæ¦‚è§ˆ](#ç³»ç»Ÿæ¦‚è§ˆ)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æŠ€æœ¯æ ˆè¯¦è§£](#æŠ€æœ¯æ ˆè¯¦è§£)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [æ•°æ®æµæ¶æ„](#æ•°æ®æµæ¶æ„)
- [APIæ¶æ„](#apiæ¶æ„)
- [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
- [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è§ˆ

AgentWorks æ˜¯ä¸€ä¸ªä¼ä¸šçº§å¤šå¹³å°è¾¾äººç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

### ç³»ç»Ÿå®šä½
- **ç›®æ ‡ç”¨æˆ·**ï¼šMCNæœºæ„ã€å“ç‰Œæ–¹ã€è¥é”€å›¢é˜Ÿ
- **æ ¸å¿ƒä»·å€¼**ï¼šç»Ÿä¸€ç®¡ç†å¤šå¹³å°è¾¾äººèµ„æºï¼Œä¼˜åŒ–å•†åŠ¡åˆä½œæµç¨‹
- **æŠ€æœ¯ç‰¹ç‚¹**ï¼šå“åº”å¼è®¾è®¡ã€å®æ—¶æ•°æ®åŒæ­¥ã€æ¨¡å—åŒ–æ¶æ„

### æ”¯æŒå¹³å°
- æŠ–éŸ³ (douyin)
- å°çº¢ä¹¦ (xiaohongshu)
- Bç«™ (bilibili)
- å¿«æ‰‹ (kuaishou)

---

## ğŸ— æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            å‰ç«¯åº”ç”¨å±‚                    â”‚
â”‚   React + TypeScript + Tailwind CSS     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            API ç½‘å…³å±‚                    â”‚
â”‚         RESTful API + JSON              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ä¸šåŠ¡é€»è¾‘å±‚                    â”‚
â”‚     Node.js + Express + Prisma          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ•°æ®æŒä¹…å±‚                    â”‚
â”‚         PostgreSQL Database             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‰ç«¯æ¶æ„æ¨¡å¼
- **ç»„ä»¶åŒ–è®¾è®¡**ï¼šå¯å¤ç”¨çš„UIç»„ä»¶åº“
- **è·¯ç”±é©±åŠ¨**ï¼šåŸºäºReact Routerçš„SPAåº”ç”¨
- **çŠ¶æ€ç®¡ç†**ï¼šContext API + Hooks
- **æ ·å¼æ–¹æ¡ˆ**ï¼šUtility-First CSS (Tailwind)

---

## ğŸ’» æŠ€æœ¯æ ˆè¯¦è§£

### å‰ç«¯æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
```typescript
// React 18 - UIæ¡†æ¶
import React from 'react';

// TypeScript - ç±»å‹å®‰å…¨
interface TalentData {
  oneId: string;
  platform: Platform;
  // ...
}

// Vite - æ„å»ºå·¥å…·
// ç‰¹ç‚¹ï¼šå¿«é€Ÿå†·å¯åŠ¨ã€å³æ—¶çƒ­æ›´æ–°
```

#### æ ·å¼è§£å†³æ–¹æ¡ˆ
```css
/* Tailwind CSS - Utility Classes */
.card {
  @apply rounded-lg bg-white shadow-md p-4;
}

/* è®¾è®¡ç³»ç»Ÿ */
- é¢œè‰²ç³»ç»Ÿï¼šPrimary/Success/Warning/Error
- é—´è·ç³»ç»Ÿï¼š4pxå€æ•° (Tailwind scale)
- å“åº”å¼æ–­ç‚¹ï¼šsm/md/lg/xl
```

### åç«¯æŠ€æœ¯æ ˆ

#### æœåŠ¡æ¶æ„
- **è¿è¡Œæ—¶**ï¼šNode.js v18+
- **æ¡†æ¶**ï¼šExpress.js
- **æ•°æ®åº“**ï¼šPostgreSQL 14+
- **ORM**ï¼šPrisma (è®¡åˆ’å¼•å…¥)

#### APIè®¾è®¡
- RESTful é£æ ¼
- JSONæ•°æ®æ ¼å¼
- JWTè®¤è¯ï¼ˆè®¡åˆ’ï¼‰

---

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

### 1. è¾¾äººç®¡ç†æ¨¡å—
```
/pages/Talents/
â”œâ”€â”€ BasicInfo/          # åŸºç¡€ä¿¡æ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ æœç´¢ç­›é€‰ç³»ç»Ÿ
â”‚   â”œâ”€â”€ å¤šå¹³å°Tabåˆ‡æ¢
â”‚   â””â”€â”€ æ‰¹é‡æ“ä½œ
â”œâ”€â”€ CreateTalent/       # åˆ›å»ºè¾¾äºº
â””â”€â”€ TalentDetail/       # è¾¾äººè¯¦æƒ…
```

**æ ¸å¿ƒåŠŸèƒ½**
- å¤šå¹³å°è¾¾äººä¿¡æ¯ç»´æŠ¤
- æ—¶é—´åºåˆ—åŒ–ä»·æ ¼ç®¡ç†
- è¿”ç‚¹é…ç½®ç®¡ç†
- å†å²è®°å½•è¿½è¸ª

### 2. æœºæ„ç®¡ç†æ¨¡å—
```
/pages/Talents/Agencies/
â”œâ”€â”€ æœºæ„åˆ—è¡¨
â”œâ”€â”€ æœºæ„è¿”ç‚¹ç®¡ç†
â””â”€â”€ æ‰¹é‡åŒæ­¥åŠŸèƒ½
```

**æ ¸å¿ƒåŠŸèƒ½**
- æœºæ„ä¿¡æ¯ç»´æŠ¤
- è¿”ç‚¹ç‡æ‰¹é‡ç®¡ç†
- è¾¾äººå½’å±ç®¡ç†

### 3. æœç´¢ç­›é€‰ç³»ç»Ÿ
```typescript
// æœç´¢ç»´åº¦
interface SearchFilters {
  searchTerm: string;        // åç§°/OneID
  talentLevel: string[];     // è¾¾äººå±‚çº§
  contentTags: string[];     // å†…å®¹æ ‡ç­¾
  rebateRange: [min, max];   // è¿”ç‚¹åŒºé—´
  priceRange: [min, max];    // ä»·æ ¼åŒºé—´
  priceTiers: string[];      // ä»·æ ¼æ¡£ä½
}
```

### 4. ä»·æ ¼ç®¡ç†ç³»ç»Ÿ

#### æ•°æ®æ¨¡å‹
```typescript
interface PriceRecord {
  platform: Platform;
  tier: PriceTier;      // æ¡£ä½ï¼š60S+, 20-60Sç­‰
  price: number;        // å•ä½ï¼šåˆ†
  month: string;        // YYYY-MM
  createdAt: Date;
  updatedAt: Date;
}
```

#### å¹³å°å·®å¼‚åŒ–
- **æŠ–éŸ³/å¿«æ‰‹**ï¼šè§†é¢‘æ—¶é•¿æ¡£ä½
- **å°çº¢ä¹¦**ï¼šå†…å®¹ç±»å‹ï¼ˆå›¾æ–‡/è§†é¢‘ï¼‰
- **Bç«™**ï¼šå®šåˆ¶åŒ–æ¡£ä½

### 5. è¿”ç‚¹ç®¡ç†ç³»ç»Ÿ

#### è¿”ç‚¹æ¨¡å¼
```typescript
enum RebateMode {
  AGENCY = 'agency',      // æœºæ„ç»‘å®šæ¨¡å¼
  INDEPENDENT = 'independent'  // ç‹¬ç«‹è®¾ç½®æ¨¡å¼
}

interface RebateConfig {
  talentId: string;
  rate: number;         // ç™¾åˆ†æ¯”å­˜å‚¨
  mode: RebateMode;
  source: string;       // æ¥æºï¼šæ‰‹åŠ¨/è§„åˆ™/æœºæ„
  validFrom: Date;
  validTo?: Date;
}
```

---

## ğŸ”„ æ•°æ®æµæ¶æ„

### å•å‘æ•°æ®æµ
```
ç”¨æˆ·äº¤äº’ â†’ Action â†’ APIè°ƒç”¨ â†’ çŠ¶æ€æ›´æ–° â†’ UIæ¸²æŸ“
```

### çŠ¶æ€ç®¡ç†ç­–ç•¥
1. **ç»„ä»¶çŠ¶æ€**ï¼šuseState - å±€éƒ¨UIçŠ¶æ€
2. **å…±äº«çŠ¶æ€**ï¼šContext API - è·¨ç»„ä»¶çŠ¶æ€
3. **æœåŠ¡å™¨çŠ¶æ€**ï¼šAPIè°ƒç”¨ + æœ¬åœ°ç¼“å­˜
4. **æŒä¹…åŒ–çŠ¶æ€**ï¼šlocalStorage - ç”¨æˆ·åå¥½

### æ•°æ®ç¼“å­˜ç­–ç•¥
- **åˆ—è¡¨æ•°æ®**ï¼š5åˆ†é’Ÿç¼“å­˜
- **è¯¦æƒ…æ•°æ®**ï¼šå®æ—¶è·å–
- **é…ç½®æ•°æ®**ï¼šä¼šè¯çº§ç¼“å­˜

---

## ğŸ”Œ APIæ¶æ„

### APIåˆ†å±‚è®¾è®¡
```
å‰ç«¯åº”ç”¨
    â†“
APIæ¥å£å±‚ (/api)
    â†“
ä¸šåŠ¡æœåŠ¡å±‚
    â†“
æ•°æ®è®¿é—®å±‚
    â†“
æ•°æ®åº“
```

### æ ¸å¿ƒAPIæ¨¡å—

#### è¾¾äººAPI
```typescript
// åŸºç¡€CRUD
GET    /api/talents
GET    /api/talents/:oneId/:platform
POST   /api/talents
PUT    /api/talents/:oneId/:platform
DELETE /api/talents/:oneId/:platform

// ä»·æ ¼ç®¡ç†
GET    /api/talents/:oneId/:platform/prices
POST   /api/talents/:oneId/:platform/prices
PUT    /api/talents/:oneId/:platform/prices/:month

// è¿”ç‚¹ç®¡ç†
GET    /api/talents/:oneId/:platform/rebate
POST   /api/talents/:oneId/:platform/rebate
PUT    /api/talents/:oneId/:platform/rebate
```

#### æœºæ„API
```typescript
GET    /api/agencies
GET    /api/agencies/:id
POST   /api/agencies
PUT    /api/agencies/:id
DELETE /api/agencies/:id

// æ‰¹é‡æ“ä½œ
POST   /api/agencies/:id/batch-update-rebate
POST   /api/agencies/:id/sync-talents
```

### APIå“åº”æ ¼å¼
```typescript
// æˆåŠŸå“åº”
interface SuccessResponse<T> {
  success: true;
  data: T;
  message?: string;
  pagination?: {
    page: number;
    limit: number;
    total: number;
  };
}

// é”™è¯¯å“åº”
interface ErrorResponse {
  success: false;
  error: string;
  message: string;
  details?: any;
}
```

---

## ğŸ¯ çŠ¶æ€ç®¡ç†

### Contextç»“æ„
```typescript
// AppContext - å…¨å±€åº”ç”¨çŠ¶æ€
interface AppContextType {
  user: User | null;
  platform: Platform;
  theme: Theme;
}

// TalentContext - è¾¾äººæ¨¡å—çŠ¶æ€
interface TalentContextType {
  talents: Talent[];
  filters: FilterState;
  loading: boolean;
}
```

### çŠ¶æ€æ›´æ–°æ¨¡å¼
```typescript
// ä¼˜åŒ–çš„çŠ¶æ€æ›´æ–°
const updateTalent = useCallback((id: string, updates: Partial<Talent>) => {
  setTalents(prev => prev.map(
    t => t.oneId === id ? { ...t, ...updates } : t
  ));
}, []);
```

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```bash
# å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev         # Vite dev server on :5173

# åç«¯å¼€å‘æœåŠ¡å™¨
npm run server:dev  # Express on :3001
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ„å»ºæµç¨‹
npm run build       # Vite production build
npm run preview     # é¢„è§ˆç”Ÿäº§æ„å»º

# éƒ¨ç½²é…ç½®
- é™æ€èµ„æºï¼šCDNåˆ†å‘
- APIæœåŠ¡ï¼šå®¹å™¨åŒ–éƒ¨ç½²
- æ•°æ®åº“ï¼šäº‘æ•°æ®åº“æœåŠ¡
```

### ç¯å¢ƒå˜é‡
```env
# .env.development
VITE_API_BASE_URL=http://localhost:3001/api
VITE_ENV=development

# .env.production
VITE_API_BASE_URL=https://api.agentworks.com
VITE_ENV=production
```

### æ€§èƒ½ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**ï¼šè·¯ç”±çº§åˆ«æ‡’åŠ è½½
- **èµ„æºä¼˜åŒ–**ï¼šå›¾ç‰‡æ‡’åŠ è½½ã€WebPæ ¼å¼
- **ç¼“å­˜ç­–ç•¥**ï¼šHTTPç¼“å­˜ + Service Worker
- **æ‰“åŒ…ä¼˜åŒ–**ï¼šTree Shakingã€å‹ç¼©

---

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### å‰ç«¯ç›‘æ§
- é”™è¯¯è¾¹ç•Œæ•è·
- æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- ç”¨æˆ·è¡Œä¸ºåˆ†æ

### åç«¯ç›‘æ§
- APIå“åº”æ—¶é—´
- é”™è¯¯ç‡ç»Ÿè®¡
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½

### æ—¥å¿—çº§åˆ«
- ERRORï¼šç³»ç»Ÿé”™è¯¯
- WARNï¼šè­¦å‘Šä¿¡æ¯
- INFOï¼šä¸€èˆ¬ä¿¡æ¯
- DEBUGï¼šè°ƒè¯•ä¿¡æ¯

---

## ğŸ” å®‰å…¨æ¶æ„

### å‰ç«¯å®‰å…¨
- XSSé˜²æŠ¤ï¼šReactè‡ªåŠ¨è½¬ä¹‰
- CSRFé˜²æŠ¤ï¼šTokenéªŒè¯
- æ•æ„Ÿæ•°æ®ï¼šä¸å­˜å‚¨åœ¨å‰ç«¯

### APIå®‰å…¨
- è®¤è¯æˆæƒï¼šJWT Tokenï¼ˆè®¡åˆ’ï¼‰
- å‚æ•°éªŒè¯ï¼šè¾“å…¥æ ¡éªŒ
- SQLæ³¨å…¥ï¼šå‚æ•°åŒ–æŸ¥è¯¢

### æ•°æ®å®‰å…¨
- ä¼ è¾“åŠ å¯†ï¼šHTTPS
- å­˜å‚¨åŠ å¯†ï¼šæ•æ„Ÿå­—æ®µåŠ å¯†
- è®¿é—®æ§åˆ¶ï¼šè§’è‰²æƒé™ï¼ˆè®¡åˆ’ï¼‰

### æƒé™é¢„ç•™è§„èŒƒ â­ v3.9.0 æ–°å¢

ä¸ºåç»­æƒé™ç³»ç»Ÿå®ç°é¢„ç•™çš„æ•°æ®å±‚å­—æ®µï¼š

```typescript
// æ‰€æœ‰é›†åˆå¿…é¡»åŒ…å«
interface BaseDocument {
  createdBy: string;       // åˆ›å»ºäºº userId
  updatedBy: string;       // æœ€åæ›´æ–°äºº
  createdAt: Date;
  updatedAt: Date;
}

// èµ„æºç±»é›†åˆé¢å¤–åŒ…å«
interface ResourceDocument extends BaseDocument {
  organizationId?: string; // ç»„ç»‡éš”ç¦»ï¼ˆé¢„ç•™ï¼‰
  departmentId?: string;   // éƒ¨é—¨éš”ç¦»ï¼ˆé¢„ç•™ï¼‰
  visibility?: 'private' | 'department' | 'organization' | 'public';
}
```

**å·²å®æ–½é›†åˆ**ï¼š
- `customers` - å®¢æˆ·ç®¡ç†
- `customer_talents` - å®¢æˆ·è¾¾äººæ± 
- `talents` - è¾¾äººä¿¡æ¯

è¯¦ç»†è§„èŒƒè¯·æŸ¥çœ‹ **[æƒé™é¢„ç•™è§„èŒƒæ–‡æ¡£](./PERMISSION_RESERVATION_SPEC.md)**

---

## ğŸ“ˆ æ‰©å±•æ€§è®¾è®¡

### å¯æ‰©å±•ç‚¹
1. **å¹³å°æ‰©å±•**ï¼šæ–°å¹³å°æ¥å…¥
2. **åŠŸèƒ½æ¨¡å—**ï¼šæ’ä»¶åŒ–è®¾è®¡
3. **APIç‰ˆæœ¬**ï¼šç‰ˆæœ¬æ§åˆ¶
4. **æ•°æ®æ¨¡å‹**ï¼šå‘åå…¼å®¹

### æœªæ¥è§„åˆ’
- å¾®æœåŠ¡æ¶æ„æ¼”è¿›
- GraphQL APIæ”¯æŒ
- å®æ—¶æ•°æ®æ¨é€(WebSocket)
- AIæ™ºèƒ½æ¨è

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- [å¼€å‘æŒ‡å—](./DEVELOPMENT_GUIDELINES.md) - å¼€å‘æµç¨‹å’Œè§„èŒƒ
- [UI/UXè§„èŒƒ](./UI_UX_GUIDELINES.md) - ç•Œé¢è®¾è®¡è§„èŒƒ
- [æ›´æ–°æ—¥å¿—](./frontends/agentworks/CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°è®°å½•
- [APIæ–‡æ¡£](./docs/API_DOCUMENTATION.md) - APIè¯¦ç»†è¯´æ˜

---

**ç»´æŠ¤è€…**: Claude Code
**åˆ›å»ºæ—¥æœŸ**: 2025-11-18
**æœ€åæ›´æ–°**: 2025-11-18

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)