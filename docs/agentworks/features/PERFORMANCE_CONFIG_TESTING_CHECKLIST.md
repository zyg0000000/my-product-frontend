# 达人表现配置编辑 - 测试清单

> **Phase**: Phase 7 - 配置编辑功能
> **测试日期**: _待填写_
> **测试人**: _待填写_

---

## 📋 测试环境检查

- [ ] 测试环境部署完成
- [ ] 浏览器: Chrome/Safari/Firefox（至少测试2个）
- [ ] 分辨率: 1920x1080 / 1366x768（至少测试2个）
- [ ] 网络环境: 正常

---

## 🔐 权限测试

- [ ] 访问 `/settings/performance-config` 需要登录
- [ ] 只有管理员可以访问配置页面
- [ ] 普通用户访问时正确跳转/提示

---

## 📱 页面加载测试

### 初次加载

- [ ] 页面正常加载，无白屏
- [ ] 顶部标题显示正确："达人表现配置管理"
- [ ] 平台 Tabs 显示正确（抖音、小红书、B站、快手）
- [ ] 二级 Tabs 显示正确（字段映射配置、数据维度配置）
- [ ] 默认选中"抖音"平台
- [ ] 默认选中"字段映射配置" Tab

### 平台切换

- [ ] 点击"抖音" - 加载抖音配置
- [ ] 点击"小红书" - 加载小红书配置（如果存在）
- [ ] 点击"B站" - 加载B站配置（如果存在）
- [ ] 点击"快手" - 加载快手配置（如果存在）
- [ ] 切换平台时显示加载状态
- [ ] 切换平台时保持当前 Tab（字段映射/维度配置）

### Tab 切换

- [ ] 点击"字段映射配置" - 显示映射列表
- [ ] 点击"数据维度配置" - 显示维度列表
- [ ] Tab 切换流畅，无延迟

---

## 🗺 字段映射配置测试

### 查看功能

- [ ] 映射列表正常显示
- [ ] 显示正确的列数：#、Excel列名、目标字段路径、格式、必需、操作
- [ ] "格式"列彩色标签显示正确
  - [ ] `percentage` - 紫色
  - [ ] `number` - 绿色
  - [ ] `date` - 蓝色
  - [ ] `text` - 灰色
- [ ] "必需"列显示正确（✓ 或 -）
- [ ] 统计信息正确："总计 X 个映射规则"
- [ ] 配置信息栏显示：配置名、版本、描述
- [ ] "刷新"按钮正常工作

### 添加映射规则

- [ ] 点击"添加映射规则"按钮
- [ ] 弹出模态框，标题为"添加映射规则"
- [ ] 表单字段完整：
  - [ ] Excel列名（必填，带红星）
  - [ ] 目标字段路径（必填，带红星）
  - [ ] 数据格式（下拉，默认text）
  - [ ] 是否必需（复选框）
  - [ ] 默认值（可选）
- [ ] 输入框 placeholder 显示正确
- [ ] 点击"取消"关闭模态框，不保存
- [ ] 点击遮罩关闭模态框，不保存
- [ ] 点击 X 关闭模态框，不保存

**验证测试**:
- [ ] 不填Excel列名，点击"保存" - 显示错误提示
- [ ] 不填目标字段路径，点击"保存" - 显示错误提示
- [ ] 填写完整信息，点击"保存" - 保存成功
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 模态框自动关闭
- [ ] 列表自动刷新，新规则出现在列表末尾

### 编辑映射规则

- [ ] 点击任意规则的"编辑"图标
- [ ] 弹出模态框，标题为"编辑映射规则"
- [ ] 表单预填充当前规则的值
- [ ] 修改"Excel列名" - 保存成功
- [ ] 修改"目标字段路径" - 保存成功
- [ ] 修改"数据格式" - 保存成功，标签颜色正确变化
- [ ] 切换"是否必需" - 保存成功
- [ ] 修改"默认值" - 保存成功
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 列表自动刷新，显示最新值

### 删除映射规则

- [ ] 点击任意规则的"删除"图标
- [ ] 弹出确认对话框
- [ ] 对话框标题："确认删除"
- [ ] 对话框消息包含被删除的Excel列名
- [ ] 点击"取消" - 对话框关闭，不删除
- [ ] 点击遮罩 - 对话框关闭，不删除
- [ ] 再次点击"删除"图标
- [ ] 点击"删除"按钮 - 删除成功
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 列表自动刷新，该规则消失

### 边界情况

- [ ] 配置为空时显示提示："暂无映射规则..."
- [ ] 网络错误时显示错误Toast
- [ ] 加载中时显示"加载中..."

---

## 🎯 数据维度配置测试

### 查看功能

- [ ] 维度列表正常显示
- [ ] 显示正确的列：拖动手柄、维度名称、分类、目标路径、类型、默认显示、可排序、宽度、操作
- [ ] "类型"列彩色标签显示正确
- [ ] "默认显示"列按钮显示正确
  - [ ] 绿色按钮 = "显示"
  - [ ] 灰色按钮 = "隐藏"
- [ ] "可排序"列显示正确（✓ 或 -）
- [ ] 统计信息正确："总计 X 个维度，默认显示 Y 个"
- [ ] 配置信息栏显示：配置名、版本、维度统计
- [ ] "刷新"按钮正常工作
- [ ] 蓝色提示框显示："提示：拖动左侧的排序图标..."

### 添加维度

- [ ] 点击"添加维度"按钮
- [ ] 弹出模态框，标题为"添加维度"
- [ ] 表单字段完整：
  - [ ] 维度ID（可输入）
  - [ ] 维度名称（必填）
  - [ ] 分类（下拉）
  - [ ] 目标字段路径（必填）
  - [ ] 数据类型（下拉）
  - [ ] 列宽（数字输入，80-400）
  - [ ] 默认显示（复选框）
  - [ ] 可排序（复选框）
  - [ ] 必需字段（复选框）
- [ ] 分类下拉选项完整：基础信息、核心指标、粉丝画像、人群包
- [ ] 数据类型下拉选项完整：文本、数字、百分比、日期
- [ ] 列宽输入框限制 80-400
- [ ] 点击"取消"关闭模态框
- [ ] 点击遮罩关闭模态框

**验证测试**:
- [ ] 不填维度ID - 显示错误提示
- [ ] 不填维度名称 - 显示错误提示
- [ ] 不填目标字段路径 - 显示错误提示
- [ ] 填写完整信息 - 保存成功
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 新维度出现在列表末尾

### 编辑维度

- [ ] 点击任意维度的"编辑"图标
- [ ] 弹出模态框，标题为"编辑维度"
- [ ] 表单预填充当前维度的值
- [ ] 维度ID字段显示为禁用状态（灰色背景）
- [ ] 提示显示："ID创建后不可修改"
- [ ] 修改"维度名称" - 保存成功
- [ ] 修改"分类" - 保存成功
- [ ] 修改"目标字段路径" - 保存成功
- [ ] 修改"数据类型" - 保存成功
- [ ] 修改"列宽" - 保存成功
- [ ] 切换"默认显示" - 保存成功
- [ ] 切换"可排序" - 保存成功
- [ ] 切换"必需字段" - 保存成功
- [ ] 列表自动刷新

### 删除维度

- [ ] 点击任意维度的"删除"图标
- [ ] 弹出确认对话框
- [ ] 对话框消息包含维度名称
- [ ] 点击"取消" - 不删除
- [ ] 点击"删除" - 删除成功
- [ ] 显示 Toast 提示
- [ ] 列表自动刷新

### 拖拽排序

**鼠标拖拽**:
- [ ] 鼠标悬停在排序图标上，光标变为拖动手势
- [ ] 点击并按住排序图标
- [ ] 拖动时，当前行变为半透明
- [ ] 拖动时，其他行正常显示
- [ ] 释放鼠标完成拖动
- [ ] 维度顺序更新成功
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 页面刷新后顺序保持

**键盘拖拽**（可访问性测试）:
- [ ] Tab键可以聚焦到排序图标
- [ ] 按空格键激活拖拽
- [ ] 方向键上/下移动维度
- [ ] 再按空格键完成拖拽
- [ ] 排序成功

**拖拽边界测试**:
- [ ] 拖动第1个到最后 - 成功
- [ ] 拖动最后1个到第1个 - 成功
- [ ] 拖动到原位置 - 不触发更新
- [ ] 快速连续拖拽 - 不出错
- [ ] 拖拽过程中关闭页面 - 不出错（无保存）

### 快速切换可见性

- [ ] 点击"默认显示"列的绿色按钮
- [ ] 按钮变为灰色，文本变为"隐藏"
- [ ] 显示 Toast 提示："配置更新成功"
- [ ] 统计信息更新："默认显示 X 个"
- [ ] 再次点击灰色按钮
- [ ] 按钮变为绿色，文本变为"显示"
- [ ] 统计信息更新

### 边界情况

- [ ] 配置为空时显示提示
- [ ] 网络错误时显示错误Toast
- [ ] 加载中时显示"加载中..."

---

## 🎨 UI/UX 测试

### 视觉效果

- [ ] 表格行悬停时背景变色
- [ ] 按钮悬停时颜色变化
- [ ] 图标按钮大小合适，易于点击
- [ ] 模态框居中显示
- [ ] 模态框背景遮罩半透明黑色
- [ ] 确认对话框居中显示
- [ ] Toast提示显示在屏幕右上角（或其他合适位置）
- [ ] 彩色标签易于区分
- [ ] 拖拽时视觉反馈清晰

### 响应式测试

**1920x1080**:
- [ ] 页面布局正常
- [ ] 表格不溢出
- [ ] 模态框大小合适

**1366x768**:
- [ ] 页面布局正常
- [ ] 表格出现横向滚动条（正常）
- [ ] 模态框大小合适

**1280x720**:
- [ ] 页面布局正常
- [ ] 功能可用

### 文字排版

- [ ] 中文显示正常，无乱码
- [ ] 英文显示正常
- [ ] 数字显示正常
- [ ] 特殊字符显示正常
- [ ] 长文本自动换行或省略
- [ ] 代码字体（目标路径）使用等宽字体

### 颜色对比度

- [ ] 文字清晰可读
- [ ] 彩色标签文字清晰
- [ ] 按钮文字清晰
- [ ] 禁用状态明显

---

## 🔄 状态管理测试

### 加载状态

- [ ] 首次加载显示"加载中..."
- [ ] 切换平台显示加载状态
- [ ] 保存时按钮显示加载状态（可选）

### 错误状态

- [ ] 网络错误时显示错误Toast
- [ ] Toast自动消失（约3秒）
- [ ] 可以手动关闭Toast（如果有关闭按钮）

### 成功状态

- [ ] 保存成功显示成功Toast
- [ ] Toast自动消失

---

## 🔗 数据持久化测试

### 保存测试

- [ ] 添加映射规则 → 保存 → 刷新页面 → 规则存在 ✅
- [ ] 编辑映射规则 → 保存 → 刷新页面 → 修改保存 ✅
- [ ] 删除映射规则 → 保存 → 刷新页面 → 规则已删除 ✅
- [ ] 添加维度 → 保存 → 刷新页面 → 维度存在 ✅
- [ ] 编辑维度 → 保存 → 刷新页面 → 修改保存 ✅
- [ ] 删除维度 → 保存 → 刷新页面 → 维度已删除 ✅
- [ ] 拖拽排序 → 刷新页面 → 顺序保持 ✅
- [ ] 切换可见性 → 刷新页面 → 状态保持 ✅

### 平台隔离测试

- [ ] 修改抖音配置 → 切换到小红书 → 小红书配置未受影响
- [ ] 修改小红书配置 → 切换到抖音 → 抖音配置未受影响

---

## 🌐 跨浏览器测试

### Chrome
- [ ] 所有功能正常
- [ ] 拖拽正常
- [ ] UI显示正常

### Safari
- [ ] 所有功能正常
- [ ] 拖拽正常
- [ ] UI显示正常

### Firefox
- [ ] 所有功能正常
- [ ] 拖拽正常
- [ ] UI显示正常

### Edge (可选)
- [ ] 所有功能正常

---

## ♿️ 可访问性测试

### 键盘导航

- [ ] Tab键可以遍历所有可交互元素
- [ ] Enter键可以触发按钮
- [ ] Esc键可以关闭模态框
- [ ] 空格键可以激活复选框
- [ ] 焦点顺序合理

### 屏幕阅读器 (可选)

- [ ] 按钮有正确的 aria-label
- [ ] 表单字段有正确的 label
- [ ] 错误信息可以被读取

---

## 🐛 Bug 记录

### Bug 模板

```markdown
**Bug ID**: PERF-CONFIG-001
**严重程度**: 高/中/低
**标题**: 简短描述
**复现步骤**:
1.
2.
3.

**预期结果**:
**实际结果**:
**截图**:
**浏览器**:
**备注**:
```

### 发现的 Bug

_待填写_

---

## ✅ 测试总结

### 统计

- **总测试项**: ___
- **通过**: ___
- **失败**: ___
- **阻塞**: ___
- **通过率**: ___%

### 测试结论

- [ ] ✅ 通过，可以发布
- [ ] ⚠️ 有轻微问题，可以发布但需要后续修复
- [ ] ❌ 有严重问题，不能发布

### 备注

_测试过程中的其他发现和建议_

---

**测试人签名**: _____________
**测试日期**: _____________

🤖 Generated with [Claude Code](https://claude.com/claude-code)
