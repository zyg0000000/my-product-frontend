{
    "collection": "talents",
    "description": "è¾¾äººæ¡£æ¡ˆé›†åˆï¼ˆv2.2 å¤šå¹³å°ç‰ˆæœ¬ï¼‰- æ¯ä¸ªè¾¾äºº+å¹³å°ç»„åˆæ˜¯ä¸€æ¡è®°å½•",
    "database": "agentworks_db",
    "version": "2.2",
    "lastUpdated": "2025-12-04",
    "author": "äº§å“å›¢é˜Ÿ",
    "fields": {
        "_id": {
            "type": "ObjectId",
            "description": "MongoDB æ–‡æ¡£ ID",
            "required": true,
            "auto": true
        },
        "oneId": {
            "type": "String",
            "description": "è¾¾äººç»Ÿä¸€æ ‡è¯†ï¼ˆè·¨å¹³å°å”¯ä¸€IDï¼‰",
            "required": true,
            "pattern": "^talent_[0-9]{8}$",
            "example": "talent_00000001",
            "comment": "åŒä¸€ä¸ªçœŸå®è¾¾äººåœ¨ä¸åŒå¹³å°å…±äº«åŒä¸€ä¸ª oneId"
        },
        "platform": {
            "type": "String",
            "description": "å¹³å°ç±»å‹",
            "required": true,
            "enum": ["douyin", "xiaohongshu", "bilibili", "kuaishou"],
            "comment": "douyin=æŠ–éŸ³, xiaohongshu=å°çº¢ä¹¦, bilibili=Bç«™, kuaishou=å¿«æ‰‹"
        },
        "platformAccountId": {
            "type": "String",
            "description": "è¯¥å¹³å°çš„è´¦å·å”¯ä¸€æ ‡è¯†",
            "required": true,
            "comment": "å¦‚æŠ–éŸ³ UIDã€å°çº¢ä¹¦ç”¨æˆ·IDç­‰ï¼Œå¹³å°å†…å”¯ä¸€"
        },
        "name": {
            "type": "String",
            "description": "è¾¾äººåœ¨è¯¥å¹³å°çš„æ˜µç§°",
            "required": true,
            "example": "å¼ ä¸‰çš„ç¾é£Ÿæ—¥è®°"
        },
        "fansCount": {
            "type": "Integer",
            "description": "ç²‰ä¸æ•°",
            "required": false,
            "min": 0,
            "example": 1000000
        },
        "talentType": {
            "type": "Array",
            "description": "è¾¾äººç±»å‹åˆ†ç±»æ ‡ç­¾",
            "required": false,
            "itemType": "String",
            "example": ["ç¾å¦†", "æ—¶å°š", "ç¾é£Ÿ"],
            "comment": "æ ¹æ®è¯¥å¹³å°çš„å†…å®¹ç±»å‹æ ‡æ³¨"
        },
        "talentTier": {
            "type": "String",
            "description": "è¾¾äººç­‰çº§ï¼ˆè¯¥å¹³å°ï¼‰",
            "required": false,
            "enum": ["å¤´éƒ¨", "è…°éƒ¨", "å°¾éƒ¨"],
            "comment": "æ ¹æ®è¯¥å¹³å°çš„ç²‰ä¸é‡å’Œå½±å“åŠ›åˆ’åˆ†"
        },
        "agencyId": {
            "type": "String",
            "description": "æ‰€å±æœºæ„ID",
            "required": false,
            "default": "individual",
            "comment": "individual=é‡ç”Ÿè¾¾äººï¼ˆç‹¬ç«‹ï¼‰ï¼Œå…¶ä»–å€¼ä¸ºæœºæ„IDï¼ˆæŒ‡å‘ agencies é›†åˆçš„æŸæ¡è®°å½•ï¼‰",
            "addedIn": "v2.1 (2025-11-15)",
            "updatedIn": "v2.2 (2025-11-16) - ç§»é™¤ belongType å­—æ®µï¼Œç»Ÿä¸€ä½¿ç”¨ agencyId"
        },
        "rebateMode": {
            "type": "String",
            "description": "è¿”ç‚¹æ¨¡å¼",
            "required": false,
            "default": "independent",
            "enum": ["independent", "agency"],
            "comment": "independent=ç‹¬ç«‹è¿”ç‚¹ï¼ˆä½¿ç”¨ currentRebate é…ç½®ï¼‰ï¼Œagency=æœºæ„ç»Ÿä¸€è¿”ç‚¹",
            "addedIn": "v2.2 (2025-12-04)"
        },
        "dbVersion": {
            "type": "String",
            "description": "æ•°æ®åº“ç‰ˆæœ¬æ ‡è®°",
            "required": false,
            "enum": ["v1", "v2"],
            "comment": "æ ‡è®°æ•°æ®ç‰ˆæœ¬ï¼Œv2 ä¸ºæ–°ç‰ˆå¤šå¹³å°æ¶æ„",
            "addedIn": "v2.2 (2025-12-04)"
        },
        "currentRebate": {
            "type": "Object",
            "description": "å½“å‰è¿”ç‚¹é…ç½®ï¼ˆv2.1 æ–°è¿”ç‚¹ç®¡ç†ç³»ç»Ÿï¼‰",
            "required": false,
            "default": {
                "rate": 10.0,
                "source": "default",
                "effectiveDate": "current_date",
                "lastUpdated": "current_datetime"
            },
            "properties": {
                "rate": {
                    "type": "Double",
                    "description": "è¿”ç‚¹ç‡ï¼ˆç™¾åˆ†æ¯”ï¼Œ2ä½å°æ•°ï¼‰",
                    "required": true,
                    "min": 0,
                    "max": 100,
                    "example": 22.50,
                    "comment": "ç²¾åº¦ï¼šå°æ•°ç‚¹å2ä½"
                },
                "source": {
                    "type": "String",
                    "description": "è¿”ç‚¹æ¥æº",
                    "required": true,
                    "enum": ["default", "personal", "rule", "agency"],
                    "comment": "default=ç³»ç»Ÿé»˜è®¤, personal=ä¸ªäººé…ç½®, rule=è§„åˆ™è§¦å‘, agency=æœºæ„ç»Ÿä¸€"
                },
                "effectiveDate": {
                    "type": "String",
                    "description": "ç”Ÿæ•ˆæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰",
                    "required": true,
                    "example": "2025-01-15"
                },
                "lastUpdated": {
                    "type": "Date",
                    "description": "æœ€åæ›´æ–°æ—¶é—´ï¼ˆISO 8601ï¼‰",
                    "required": true,
                    "example": "2025-01-15T10:30:00Z"
                }
            },
            "comment": "æä¾›å®æ—¶è¿”ç‚¹é…ç½®ã€‚å†å²è®°å½•å­˜å‚¨åœ¨ rebate_configs é›†åˆ",
            "addedIn": "v2.1 (2025-11-15)"
        },
        "prices": {
            "type": "Array",
            "description": "ä»·æ ¼å†å²æ•°ç»„ï¼ˆæ”¯æŒæŒ‰æœˆè®°å½•ä»·æ ¼å˜åŒ–ï¼‰",
            "required": true,
            "default": [],
            "itemType": "Object",
            "itemSchema": {
                "year": {
                    "type": "Integer",
                    "description": "ä»·æ ¼å¹´ä»½",
                    "required": true,
                    "example": 2025
                },
                "month": {
                    "type": "Integer",
                    "description": "ä»·æ ¼æœˆä»½",
                    "required": true,
                    "min": 1,
                    "max": 12,
                    "example": 1
                },
                "type": {
                    "type": "String",
                    "description": "ä»·æ ¼ç±»å‹ï¼ˆæ ¹æ®å¹³å°ä¸åŒï¼‰",
                    "required": true,
                    "comment": "æŠ–éŸ³ï¼švideo_60plus|video_20to60|video_1to20|live, å°çº¢ä¹¦ï¼švideo|image"
                },
                "price": {
                    "type": "Integer",
                    "description": "ä»·æ ¼é‡‘é¢ï¼ˆå•ä½ï¼šåˆ†ï¼Œç²¾ç¡®åˆ°åˆ†ï¼‰",
                    "required": true,
                    "min": 0,
                    "example": 31888800,
                    "comment": "æ”¯æŒç²¾ç¡®ä»·æ ¼å½•å…¥ï¼Œå¦‚ 318888å…ƒ = 31888800åˆ†"
                },
                "status": {
                    "type": "String",
                    "description": "ä»·æ ¼çŠ¶æ€",
                    "required": true,
                    "enum": ["confirmed", "provisional"],
                    "default": "confirmed",
                    "comment": "confirmed=æ­£å¼ä»·æ ¼, provisional=ä¸´æ—¶ä»·æ ¼"
                }
            },
            "uniqueKey": ["year", "month", "type"],
            "comment": "ä»·æ ¼æŒ‰å¹³å°ç‹¬ç«‹è®¾ç½®ï¼Œæ”¯æŒå†å²è¿½æº¯ã€‚å”¯ä¸€é”®ï¼šyear + month + type"
        },
        "platformSpecific": {
            "type": "Object",
            "description": "å¹³å°ç‰¹æœ‰å­—æ®µï¼ˆåŠ¨æ€æ‰©å±•ï¼‰",
            "required": false,
            "properties": {
                "xingtuId": {
                    "type": "String",
                    "description": "æ˜Ÿå›¾å¹³å° IDï¼ˆä»…æŠ–éŸ³ï¼‰",
                    "platform": "douyin",
                    "example": "6852516526931574798"
                },
                "uid": {
                    "type": "String",
                    "description": "æŠ–éŸ³ UIDï¼ˆä»…æŠ–éŸ³ï¼‰",
                    "platform": "douyin",
                    "example": "58180322231"
                },
                "starLevel": {
                    "type": "Integer",
                    "description": "æ˜Ÿå›¾ç­‰çº§ï¼ˆä»…æŠ–éŸ³ï¼‰",
                    "platform": "douyin",
                    "min": 1,
                    "max": 5
                },
                "mcnName": {
                    "type": "String",
                    "description": "MCN æœºæ„åç§°ï¼ˆå°çº¢ä¹¦å¸¸ç”¨ï¼‰",
                    "platform": "xiaohongshu"
                },
                "contentTags": {
                    "type": "Array",
                    "description": "å†…å®¹æ ‡ç­¾ï¼ˆå°çº¢ä¹¦ç‰¹æœ‰ï¼‰",
                    "itemType": "String",
                    "platform": "xiaohongshu"
                },
                "upLevel": {
                    "type": "String",
                    "description": "UP ä¸»ç­‰çº§ï¼ˆä»…Bç«™ï¼‰",
                    "platform": "bilibili",
                    "example": "LV6"
                }
            },
            "comment": "å„å¹³å°ç‰¹æœ‰å­—æ®µå¯çµæ´»æ·»åŠ ï¼Œä¸å½±å“æ ¸å¿ƒç»“æ„"
        },
        "performanceData": {
            "type": "Object",
            "description": "è¯¥å¹³å°çš„è¡¨ç°æ•°æ®ï¼ˆå·²è¿ç§»è‡³ talent_performance é›†åˆï¼‰",
            "required": false,
            "deprecated": true,
            "deprecatedNote": "è¡¨ç°æ•°æ®å·²è¿ç§»è‡³ç‹¬ç«‹çš„ talent_performance é›†åˆï¼Œæ­¤å­—æ®µä»…ä¿ç•™ lastUpdated ç”¨äºåŒæ­¥æ—¶é—´æˆ³",
            "properties": {
                "lastUpdated": {
                    "type": "Date",
                    "description": "æœ€åæ›´æ–°æ—¶é—´",
                    "example": "2025-11-29T04:21:44.929Z"
                }
            },
            "comment": "v2.1 èµ·è¡¨ç°æ•°æ®å­˜å‚¨åœ¨ talent_performance é›†åˆï¼Œé€šè¿‡ oneId + platform å…³è”"
        },
        "schedules": {
            "type": "Array",
            "description": "è¯¥å¹³å°çš„æ¡£æœŸå®‰æ’",
            "required": false,
            "default": [],
            "itemType": "Object",
            "itemSchema": {
                "startDate": { "type": "Date", "description": "å¼€å§‹æ—¥æœŸ" },
                "endDate": { "type": "Date", "description": "ç»“æŸæ—¥æœŸ" },
                "status": { "type": "String", "enum": ["available", "booked", "unavailable"] },
                "projectId": { "type": "String", "description": "å…³è”çš„é¡¹ç›®IDï¼ˆå¦‚å·²é¢„å®šï¼‰" }
            }
        },
        "remarks": {
            "type": "Object",
            "description": "å¤‡æ³¨ä¿¡æ¯",
            "required": false,
            "comment": "é”®ä¸ºå¤‡æ³¨ç±»å‹ï¼Œå€¼ä¸ºå¤‡æ³¨å†…å®¹"
        },
        "oneIdHistory": {
            "type": "Array",
            "description": "oneId å˜æ›´å†å²ï¼ˆåˆå¹¶æ“ä½œè®°å½•ï¼‰",
            "required": false,
            "default": [],
            "itemType": "Object",
            "itemSchema": {
                "oldOneId": {
                    "type": "String",
                    "description": "æ—§çš„ oneId",
                    "required": true
                },
                "mergedAt": {
                    "type": "Date",
                    "description": "åˆå¹¶æ—¶é—´",
                    "required": true
                },
                "mergedBy": {
                    "type": "String",
                    "description": "æ“ä½œäºº",
                    "required": true
                },
                "reason": {
                    "type": "String",
                    "description": "åˆå¹¶åŸå› ",
                    "required": false
                }
            },
            "comment": "è®°å½•è¾¾äººåˆå¹¶çš„å®Œæ•´å†å²ï¼Œç”¨äºè¿½æº¯"
        },
        "status": {
            "type": "String",
            "description": "çŠ¶æ€",
            "required": true,
            "default": "active",
            "enum": ["active", "inactive", "archived"],
            "comment": "active=æ´»è·ƒ, inactive=æš‚åœåˆä½œ, archived=å·²å½’æ¡£"
        },
        "createdAt": {
            "type": "Date",
            "description": "åˆ›å»ºæ—¶é—´",
            "required": true,
            "default": "now"
        },
        "updatedAt": {
            "type": "Date",
            "description": "æ›´æ–°æ—¶é—´",
            "required": true,
            "default": "now"
        }
    },
    "indexes": [
        {
            "name": "idx_oneId",
            "fields": { "oneId": 1 },
            "description": "æŸ¥è¯¢æŸè¾¾äººçš„æ‰€æœ‰å¹³å°è´¦å·"
        },
        {
            "name": "idx_platform",
            "fields": { "platform": 1 },
            "description": "æŸ¥è¯¢æŸå¹³å°çš„æ‰€æœ‰è¾¾äºº"
        },
        {
            "name": "idx_oneId_platform",
            "fields": { "oneId": 1, "platform": 1 },
            "unique": true,
            "description": "è”åˆå”¯ä¸€ç´¢å¼•ï¼šä¸€ä¸ªè¾¾äººåœ¨ä¸€ä¸ªå¹³å°åªèƒ½æœ‰ä¸€æ¡è®°å½•"
        },
        {
            "name": "idx_platformAccountId",
            "fields": { "platformAccountId": 1 },
            "description": "æŒ‰å¹³å°è´¦å·IDæŸ¥è¯¢"
        },
        {
            "name": "idx_name",
            "fields": { "name": 1 },
            "description": "æ˜µç§°ç´¢å¼•ï¼Œç”¨äºæœç´¢"
        },
        {
            "name": "idx_status",
            "fields": { "status": 1 },
            "description": "çŠ¶æ€ç´¢å¼•"
        },
        {
            "name": "idx_createdAt",
            "fields": { "createdAt": -1 },
            "description": "æŒ‰åˆ›å»ºæ—¶é—´å€’åº"
        }
    ],
    "relations": [
        {
            "collection": "cooperations",
            "type": "one-to-many",
            "foreignKey": "talentOneId",
            "description": "ä¸€ä¸ªè¾¾äººï¼ˆoneIdï¼‰å¯ä»¥æœ‰å¤šä¸ªåˆä½œè®¢å•"
        },
        {
            "collection": "talent_merges",
            "type": "one-to-many",
            "foreignKey": "primaryOneId",
            "description": "è¾¾äººåˆå¹¶å†å²è®°å½•"
        }
    ],
    "notes": [
        "ã€æ ¸å¿ƒè®¾è®¡ã€‘v2.2 å¤šå¹³å°æ¶æ„ï¼šæ¯ä¸ª"è¾¾äºº+å¹³å°"æ˜¯ä¸€æ¡ç‹¬ç«‹è®°å½•",
        "ã€oneId ç³»ç»Ÿã€‘åŒä¸€ä¸ªçœŸå®è¾¾äººåœ¨ä¸åŒå¹³å°å…±äº«åŒä¸€ä¸ª oneId",
        "ã€å”¯ä¸€çº¦æŸã€‘(oneId, platform) è”åˆå”¯ä¸€ï¼Œç¡®ä¿ä¸€ä¸ªè¾¾äººåœ¨ä¸€ä¸ªå¹³å°åªæœ‰ä¸€æ¡è®°å½•",
        "ã€å¹³å°æ‰©å±•ã€‘é€šè¿‡ platformSpecific å­—æ®µå­˜å‚¨å¹³å°ç‰¹æœ‰æ•°æ®ï¼Œæ˜“äºæ‰©å±•æ–°å¹³å°",
        "ã€åˆå¹¶è¿½æº¯ã€‘oneIdHistory è®°å½•è¾¾äººåˆå¹¶å†å²ï¼Œæ”¯æŒåæœŸå‘ç°é‡å¤è¾¾äººå¹¶åˆå¹¶",
        "ã€ä»·æ ¼ç‹¬ç«‹ã€‘ä¸åŒå¹³å°çš„ä»·æ ¼ç‹¬ç«‹å­˜å‚¨ï¼Œäº’ä¸å½±å“",
        "ã€æ—¶é—´åºåˆ—ã€‘prices é‡‡ç”¨æ•°ç»„ç»“æ„ï¼Œæ”¯æŒæŒ‰æœˆè®°å½•å†å²å˜åŒ–",
        "ã€ä»·æ ¼ç±»å‹ã€‘æŠ–éŸ³ï¼švideo_60plus, video_21_60, video_1_20ï¼›å°çº¢ä¹¦ï¼švideo, image",
        "ã€ä»·æ ¼å”¯ä¸€é”®ã€‘prices æ•°ç»„ä¸­ (year, month, type) è”åˆå”¯ä¸€",
        "ã€æ•°æ®éš”ç¦»ã€‘ä¸ v1ï¼ˆkol_dataï¼‰å®Œå…¨ç‹¬ç«‹ï¼Œä¸å½±å“æ—§ç³»ç»Ÿ",
        "ã€v2.1 æ–°å¢ã€‘agencyId å­—æ®µï¼šæœºæ„IDï¼Œindividual è¡¨ç¤ºé‡ç”Ÿè¾¾äºº",
        "ã€v2.1 æ–°å¢ã€‘currentRebate å­—æ®µï¼šå®æ—¶è¿”ç‚¹é…ç½®ï¼Œç²¾åº¦2ä½å°æ•°ï¼ˆ0-100%ï¼‰",
        "ã€v2.1 æ–°å¢ã€‘è¿”ç‚¹å†å²è®°å½•è¿ç§»è‡³ç‹¬ç«‹é›†åˆ rebate_configsï¼Œæ”¯æŒå®Œæ•´å®¡è®¡è¿½æº¯",
        "ã€v2.2 æ–°å¢ã€‘rebateMode å­—æ®µï¼šè¿”ç‚¹æ¨¡å¼ï¼ˆindependent/agencyï¼‰",
        "ã€v2.2 æ–°å¢ã€‘dbVersion å­—æ®µï¼šæ•°æ®åº“ç‰ˆæœ¬æ ‡è®°",
        "ã€v2.2 æ–°å¢ã€‘platformSpecific.uid å­—æ®µï¼šæŠ–éŸ³ UID",
        "ã€è¡¨ç°æ•°æ®ã€‘å·²è¿ç§»è‡³ talent_performance é›†åˆï¼Œé€šè¿‡ oneId + platform å…³è”",
        "ã€è¿”ç‚¹ç®¡ç†ã€‘æ”¯æŒç«‹å³ç”Ÿæ•ˆå’Œä¸‹æ¬¡åˆä½œç”Ÿæ•ˆä¸¤ç§æ¨¡å¼",
        "ã€è¿”ç‚¹æ¥æºã€‘default=ç³»ç»Ÿé»˜è®¤10%, personal=ä¸ªäººé…ç½®, rule=è§„åˆ™è§¦å‘, agency=æœºæ„ç»Ÿä¸€"
    ],
    "examples": [
        {
            "description": "ç¤ºä¾‹1ï¼šå®é™…ç”Ÿäº§æ•°æ®ï¼ˆæŠ–éŸ³è¾¾äººï¼‰",
            "data": {
                "oneId": "talent_00000001",
                "platform": "douyin",
                "platformAccountId": "6852516526931574798",
                "name": "æ¬£å®‡çš„æç¬‘æ—¥å¸¸ ğŸ˜",
                "fansCount": null,
                "talentType": ["å‰§æƒ…æç¬‘"],
                "talentTier": "å°¾éƒ¨",
                "agencyId": "individual",
                "rebateMode": "independent",
                "currentRebate": {
                    "rate": 5,
                    "source": "agency",
                    "effectiveDate": "2025-11-29",
                    "lastUpdated": "2025-11-29T04:13:53.320Z"
                },
                "prices": [
                    { "year": 2025, "month": 9, "type": "video_60plus", "price": 7000000, "status": "confirmed" },
                    { "year": 2025, "month": 9, "type": "video_21_60", "price": 6000000, "status": "confirmed" },
                    { "year": 2025, "month": 9, "type": "video_1_20", "price": 5000000, "status": "confirmed" },
                    { "year": 2025, "month": 10, "type": "video_60plus", "price": 7000000, "status": "confirmed" },
                    { "year": 2025, "month": 10, "type": "video_21_60", "price": 6000000, "status": "confirmed" },
                    { "year": 2025, "month": 10, "type": "video_1_20", "price": 5000000, "status": "confirmed" },
                    { "year": 2025, "month": 11, "type": "video_60plus", "price": 7000000, "status": "confirmed" },
                    { "year": 2025, "month": 11, "type": "video_21_60", "price": 6000000, "status": "confirmed" },
                    { "year": 2025, "month": 11, "type": "video_1_20", "price": 5000000, "status": "confirmed" }
                ],
                "platformSpecific": {
                    "xingtuId": "6852516526931574798",
                    "uid": "58180322231"
                },
                "status": "active",
                "performanceData": {
                    "lastUpdated": "2025-11-29T04:21:44.929Z"
                },
                "createdAt": "2025-11-29T04:13:53.320Z",
                "updatedAt": "2025-11-29T04:21:44.929Z"
            }
        },
        {
            "description": "ç¤ºä¾‹2ï¼šå°çº¢ä¹¦è¾¾äºº",
            "data": {
                "oneId": "talent_00000001",
                "platform": "xiaohongshu",
                "platformAccountId": "xhs_789012",
                "name": "å°å¼ çˆ±åšèœ",
                "fansCount": 500000,
                "talentType": ["ç¾é£Ÿ", "æ¢åº—"],
                "talentTier": "è…°éƒ¨",
                "agencyId": "agency_001",
                "rebateMode": "agency",
                "currentRebate": {
                    "rate": 15,
                    "source": "agency",
                    "effectiveDate": "2025-01-01",
                    "lastUpdated": "2025-01-01T00:00:00Z"
                },
                "prices": [
                    { "year": 2025, "month": 1, "type": "video", "price": 3000000, "status": "confirmed" },
                    { "year": 2025, "month": 1, "type": "image", "price": 2000000, "status": "confirmed" }
                ],
                "platformSpecific": {
                    "mcnName": "æŸMCNæœºæ„"
                },
                "status": "active",
                "createdAt": "2025-01-01T00:00:00Z",
                "updatedAt": "2025-01-15T10:30:00Z"
            }
        }
    ]
}
